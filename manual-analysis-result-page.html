<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!-- !Font Awasome -->
        <link
            rel="stylesheet"
            href="https://site-assets.fontawesome.com/releases/v6.6.0/css/all.css"
        />

        <link
            rel="stylesheet"
            href="https://site-assets.fontawesome.com/releases/v6.6.0/css/sharp-duotone-solid.css"
        />

        <link
            rel="stylesheet"
            href="https://site-assets.fontawesome.com/releases/v6.6.0/css/sharp-thin.css"
        />

        <link
            rel="stylesheet"
            href="https://site-assets.fontawesome.com/releases/v6.6.0/css/sharp-solid.css"
        />

        <link
            rel="stylesheet"
            href="https://site-assets.fontawesome.com/releases/v6.6.0/css/sharp-regular.css"
        />

        <link
            rel="stylesheet"
            href="https://site-assets.fontawesome.com/releases/v6.6.0/css/sharp-light.css"
        />
        <link rel="icon" type="image/svg" href="src/assets/svg/logo.svg" />
        <link
            rel="stylesheet"
            href="src/manual-instrumental-analysis-result-page.css"
        />

        <title>Medical expert</title>
    </head>
    <body>
        <main>
            <form class="main-container white_box">
                <a href="index.html" class="previos-btn">
                    <img src="src/assets/svg/right-arrow-icon.svg" alt="left" />
                    Geri
                </a>
                <h3>Manual (aparatsız) analiz nəticələrini daxil edin</h3>
                <div class="form-group">
                    <input type="file" id="file-input" multiple />
                    <div>
                        <img src="src/assets/svg/cloud-upload-icon.svg" />
                        <p>
                            Yükləmək üçün faylı bu sahəyə çəkin və ya yuxarıdakı
                            simgəyə klikləyin
                        </p>
                    </div>
                </div>
                <ul id="files-list"></ul>
                <div class="form-group-btns">
                    <a href="instrumental-analysis-result-page.html" class="btn_primary">İrəli</a>
                </div>
            </form>
            <ul class="main-footer">
                <li><a href="contact.html"> Əlaqə </a></li>
                <li><a href="#"> Şərtlər və qaydalar </a></li>
                <li><a href="index.html#faq"> Tez-tez verilən suallar </a></li>
            </ul>
        </main>
        <script>
            let fileInput = document.getElementById("file-input");
            let fileList = document.getElementById("files-list");

            function previewFiles() {
                const preview = document.querySelector("#files-list");
                const files = fileInput.files;
                console.log(files)
                function readAndPreview(file) {
                    // Make sure `file.name` matches our extensions criteria
                    if (/\.(jpe?g|png|gif)$/i.test(file.name)) {
                        const reader = new FileReader();

                        reader.addEventListener(
                            "load",
                            () => {
                                let listItem = document.createElement("li");
                                // reader.result
                                // const image = new Image();
                                // image.height = 100;
                                // image.title = file.name;
                                // image.src = reader.result;

                                let fileName = file.name;
                                let fileSize = (file.size / 1024).toFixed(1);
                                listItem.innerHTML = `


                                        <div>
                                            <img src="${reader.result}"/>
                                            <p>${fileName}</p>
                                        </div>
                                        <i class="fa-solid fa-trash" style="color:#DC3545;" onclick="removeItem(this)"></i>
                                `;

                                if (fileSize >= 1024) {
                                    fileSize = (fileSize / 1024).toFixed(1);
                                    listItem.innerHTML = `
                                        <img src="${reader.result}"/>
                                        <p>${fileName}</p>
                                        <p>${fileSize}MB</p>

                                `;
                                }
                                preview.appendChild(listItem);
                            },
                            false
                        );  
                        reader.readAsDataURL(file);
                    }
                }

                if (files) {
                    Array.prototype.forEach.call(files, readAndPreview);
                }
            }

            fileInput.addEventListener("change", previewFiles);
            function removeItem(item){
                item.parentElement.remove()
            }
        </script>
    </body>
</html>
